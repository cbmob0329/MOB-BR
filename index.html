<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"
  />
  <title>MOB BR</title>

  <!-- =========================
       CSS（分割読み込み）
       ※順番厳守
  ========================== -->
  <link rel="stylesheet" href="base.css?v=19" />
  <link rel="stylesheet" href="title.css?v=19" />
  <link rel="stylesheet" href="main.css?v=19" />
  <link rel="stylesheet" href="team.css?v=19" />
  <link rel="stylesheet" href="training.css?v=19" />
  <!-- ★大会専用 -->
  <link rel="stylesheet" href="tournament.css?v=19" />

  <!-- 追加CSS（未作成ならコメントアウトでOK） -->
  <!-- <link rel="stylesheet" href="shop.css?v=19" /> -->
  <!-- <link rel="stylesheet" href="card.css?v=19" /> -->
  <!-- <link rel="stylesheet" href="schedule.css?v=19" /> -->
</head>

<body class="no-callout">

  <!-- =========================
       TITLE SCREEN
  ========================== -->
  <div id="titleScreen" class="titleScreen" aria-label="MOB BR タイトル">
    <div class="titleBg" aria-hidden="true"></div>

    <div class="titleInner">
      <div class="titleLogo">
        <img src="rogo.png" alt="MOB BR" draggable="false" />
      </div>

      <button
        class="titleNextBtn"
        id="btnTitleNext"
        type="button"
        aria-label="次へ"
      >
        <img src="bnext.png" alt="NEXT" draggable="false" />
      </button>

      <!-- ★テスト用：タイトルから即ローカル大会（後で消す） -->
      <button
        id="btnTitleLocalTest"
        type="button"
        style="
          margin-top: 14px;
          min-height: 44px;
          padding: 10px 16px;
          border-radius: 14px;
          border: 1px solid rgba(255,255,255,.35);
          background: rgba(255,255,255,.72);
          font-weight: 1000;
          letter-spacing: .02em;
        "
      >
        ローカル大会（テスト）
      </button>
    </div>

    <div class="safePad" aria-hidden="true"></div>
  </div>

  <!-- =========================
       MAIN SCREEN
       ※初期非表示
  ========================== -->
  <div
    id="app"
    aria-label="MOB BR メイン画面"
    style="display:none;"
  >
    <!-- 全体背景 -->
    <div class="bg" aria-hidden="true"></div>

    <!-- =========================
         LEFT MENU
    ========================== -->
    <aside class="leftCol" aria-label="メニュー">
      <div class="loopScroll">
        <div class="loopInner">
          <button class="imgBtn floaty" id="btnTeam" type="button">
            <img src="bteam.png" alt="TEAM" draggable="false" />
          </button>

          <button class="imgBtn floaty delay1" id="btnBattle" type="button">
            <img src="bbattle.png" alt="BATTLE" draggable="false" />
          </button>

          <button class="imgBtn floaty delay2" id="btnTraining" type="button">
            <img src="btra.png" alt="TRAINING" draggable="false" />
          </button>

          <button class="imgBtn floaty delay3" id="btnShop" type="button">
            <img src="bshop.png" alt="SHOP" draggable="false" />
          </button>

          <button class="imgBtn floaty delay4" id="btnSchedule" type="button">
            <img src="bsc.png" alt="SCHEDULE" draggable="false" />
          </button>

          <button class="imgBtn floaty delay5" id="btnCard" type="button">
            <img src="bcard.png" alt="CARD" draggable="false" />
          </button>
        </div>
      </div>
    </aside>

    <!-- =========================
         RIGHT COLUMN
    ========================== -->
    <main class="rightCol">

      <!-- TOP -->
      <section class="topRow">
        <div class="logoWrap">
          <img src="rogo.png" alt="MOB BR" draggable="false" />
        </div>

        <div class="jobWrap">
          <img class="jobBg" src="job.png" alt="" draggable="false" />
          <div class="jobText">
            <div class="jobLine small">
              VER <span id="uiVer">v19</span>
            </div>
            <div class="jobLine tappable" id="tapCompany">
              企業名：<span id="uiCompany">CB Memory</span>
            </div>
            <div class="jobLine tappable" id="tapTeamName">
              チーム名：<span id="uiTeam">PLAYER TEAM</span>
            </div>
            <div class="jobLine">
              所持G：<span id="uiGold">0</span>G
            </div>
            <div class="jobLine">
              企業ランク：<span id="uiRank">RANK 10</span>
            </div>
          </div>
        </div>
      </section>

      <!-- MAIN SQUARE -->
      <section class="gameRow">
        <div class="mainSquare">
          <img class="mainFrame" src="main1.png" alt="" draggable="false" />
          <img
            class="teamImg"
            id="teamImg"
            src="P1.png"
            alt="TEAM"
            draggable="false"
          />
          <button class="memberBtn" id="btnMembers" type="button">
            メンバー名
          </button>
        </div>
      </section>

      <!-- BOTTOM LOG -->
      <section class="bottomRow">
        <div class="rogWrap">
          <img class="rogBg" src="rog.png" alt="" draggable="false" />
          <div class="rogText">
            <div class="dateLine">
              <span id="uiY">1989</span>年
              <span id="uiM">1</span>月
              <span id="uiW">1</span>週
            </div>
            <div class="nextTourLine">
              次の大会：
              <span id="uiNextTour">未定</span>
              （<span id="uiNextTourW">未定</span>）
            </div>
            <div class="divider"></div>
            <div class="recentOnly">
              <span id="uiRecent">未定</span>
            </div>
            <div class="hintLine">
              ※文章演出のみ
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- =========================
         MODALS / OVERLAYS
    ========================== -->
    <div class="modalBack" id="modalBack"></div>

    <!-- メンバー名 -->
    <div class="modalCard" id="membersPop" aria-hidden="true">
      <div class="modalTitle">メンバー名</div>
      <div class="membersList">
        <button class="nameRow" id="rowM1" type="button">
          <span class="nameLabel">1</span>
          <span class="nameVal" id="uiM1">A</span>
        </button>
        <button class="nameRow" id="rowM2" type="button">
          <span class="nameLabel">2</span>
          <span class="nameVal" id="uiM2">B</span>
        </button>
        <button class="nameRow" id="rowM3" type="button">
          <span class="nameLabel">3</span>
          <span class="nameVal" id="uiM3">C</span>
        </button>
      </div>
      <button class="closeBtn" id="btnCloseMembers" type="button">閉じる</button>
    </div>

    <!-- TEAM SCREEN -->
    <div id="teamScreen" class="teamScreen" aria-label="チーム" aria-hidden="true">
      <div class="teamPanel teamPanelWide" role="dialog" aria-modal="true">
        <div class="teamHead">
          <h2 class="teamTitle">チーム</h2>
          <button class="closeBtn teamCloseBtn" id="btnCloseTeam" type="button">閉じる</button>
        </div>

        <div class="teamHeaderA">
          <div class="teamHeaderLeft">
            <div class="line">企業名：<b id="tCompany">CB Memory</b></div>
            <div class="line">チーム名：<b id="tTeam">PLAYER TEAM</b></div>
          </div>

          <div class="teamHeaderRight">
            <div class="teamPowerBig">
              総合 <span id="tTeamPower">0%</span>
            </div>
          </div>
        </div>

        <div class="teamMembersA">
          <div class="memberCardA" aria-label="メンバーA">
            <div class="memberTop">
              <div class="memberName" id="tNameA">A</div>
              <div class="memberTag">A</div>
            </div>
            <div class="memberStatsGridA">
              <div class="statCellA"><div class="k">体力</div><div class="v" id="tA_hp">0</div></div>
              <div class="statCellA"><div class="k">メンタル</div><div class="v" id="tA_mental">0</div></div>
              <div class="statCellA"><div class="k">エイム</div><div class="v" id="tA_aim">0</div></div>
              <div class="statCellA"><div class="k">敏捷</div><div class="v" id="tA_agi">0</div></div>
              <div class="statCellA"><div class="k">技術</div><div class="v" id="tA_tech">0</div></div>
              <div class="statCellA"><div class="k">サポ</div><div class="v" id="tA_support">0</div></div>
              <div class="statCellA"><div class="k">索敵</div><div class="v" id="tA_scan">0</div></div>
              <div class="statCellA"><div class="k">ULT</div><div class="v" id="tA_ult">未定</div></div>
            </div>
            <div class="teamMiniSkillRow">
              <div class="teamMiniSkill">PAS：<span id="tA_passive">未定</span></div>
            </div>
          </div>

          <div class="memberCardA" aria-label="メンバーB">
            <div class="memberTop">
              <div class="memberName" id="tNameB">B</div>
              <div class="memberTag">B</div>
            </div>
            <div class="memberStatsGridA">
              <div class="statCellA"><div class="k">体力</div><div class="v" id="tB_hp">0</div></div>
              <div class="statCellA"><div class="k">メンタル</div><div class="v" id="tB_mental">0</div></div>
              <div class="statCellA"><div class="k">エイム</div><div class="v" id="tB_aim">0</div></div>
              <div class="statCellA"><div class="k">敏捷</div><div class="v" id="tB_agi">0</div></div>
              <div class="statCellA"><div class="k">技術</div><div class="v" id="tB_tech">0</div></div>
              <div class="statCellA"><div class="k">サポ</div><div class="v" id="tB_support">0</div></div>
              <div class="statCellA"><div class="k">索敵</div><div class="v" id="tB_scan">0</div></div>
              <div class="statCellA"><div class="k">ULT</div><div class="v" id="tB_ult">未定</div></div>
            </div>
            <div class="teamMiniSkillRow">
              <div class="teamMiniSkill">PAS：<span id="tB_passive">未定</span></div>
            </div>
          </div>

          <div class="memberCardA" aria-label="メンバーC">
            <div class="memberTop">
              <div class="memberName" id="tNameC">C</div>
              <div class="memberTag">C</div>
            </div>
            <div class="memberStatsGridA">
              <div class="statCellA"><div class="k">体力</div><div class="v" id="tC_hp">0</div></div>
              <div class="statCellA"><div class="k">メンタル</div><div class="v" id="tC_mental">0</div></div>
              <div class="statCellA"><div class="k">エイム</div><div class="v" id="tC_aim">0</div></div>
              <div class="statCellA"><div class="k">敏捷</div><div class="v" id="tC_agi">0</div></div>
              <div class="statCellA"><div class="k">技術</div><div class="v" id="tC_tech">0</div></div>
              <div class="statCellA"><div class="k">サポ</div><div class="v" id="tC_support">0</div></div>
              <div class="statCellA"><div class="k">索敵</div><div class="v" id="tC_scan">0</div></div>
              <div class="statCellA"><div class="k">ULT</div><div class="v" id="tC_ult">未定</div></div>
            </div>
            <div class="teamMiniSkillRow">
              <div class="teamMiniSkill">PAS：<span id="tC_passive">未定</span></div>
            </div>
          </div>
        </div>

        <div class="teamFooterA">
          <div class="teamSaveRowA">
            <button class="saveBtn" id="btnManualSave" type="button">セーブ</button>
            <button class="saveBtn danger" id="btnDeleteSave" type="button">セーブ削除</button>
          </div>
          <div class="teamFooterNote">
            ※能力値は修行やアイテムで成長します（表示は読みやすさ最優先）
          </div>
        </div>
      </div>
    </div>

    <!-- TRAINING SCREEN -->
    <div id="trainingScreen" class="teamScreen" aria-label="育成（修行）" aria-hidden="true">
      <div class="teamPanel teamPanelWide" role="dialog" aria-modal="true">
        <div class="teamHead">
          <h2 class="teamTitle">育成（修行）</h2>
          <button class="closeBtn teamCloseBtn" id="btnCloseTraining" type="button">閉じる</button>
        </div>

        <div class="teamMeta">
          <div class="dateLine" style="font-weight:900;">
            <span id="trY">1989</span>年
            <span id="trM">1</span>月
            第<span id="trW">1</span>週
          </div>
          <div style="opacity:.9;font-size:13px;line-height:1.35;margin-top:6px;">
            ※3人分の修行を選択して実行<br />
            ※結果OKでのみ確定（EXP反映＋週進行）
          </div>
        </div>

        <div class="teamSection">
          <div class="teamSectionTitle">修行メニュー</div>
          <div id="trainingCards"></div>
          <div style="height:12px;"></div>

          <button class="saveBtn" id="btnTrainingStart" type="button" disabled>
            修行を実行
          </button>

          <div class="saveNote">
            共通：全能力 EXP +1<br />
            専門：対象能力 EXP +4（共通+1 +追加+3）<br />
            総合：全能力 EXP +2（共通+1 +追加+1）
          </div>
        </div>
      </div>
    </div>

    <!-- SHOP SCREEN -->
    <div id="shopScreen" class="teamScreen" aria-label="ショップ" aria-hidden="true">
      <div class="teamPanel teamPanelWide" role="dialog" aria-modal="true">
        <div class="teamHead">
          <h2 class="teamTitle">ショップ（カードガチャ）</h2>
          <button class="closeBtn teamCloseBtn" id="btnCloseShop" type="button">閉じる</button>
        </div>

        <div class="teamMeta">
          <div>所持G：<span id="shopGold">0</span></div>
          <div>CDP：<span id="shopCDP">0</span></div>
          <div style="opacity:.9;font-size:13px;line-height:1.3;">
            ※ここは「カードガチャのみ」<br />
            ※確率・％表示はしない（仕様）
          </div>
        </div>

        <div class="teamSection">
          <div class="teamSectionTitle">カードガチャ</div>

          <div class="saveRow">
            <button class="saveBtn" id="btnGacha1" type="button">1回引く</button>
            <button class="saveBtn" id="btnGacha10" type="button">10連</button>
          </div>

          <div style="height:10px;"></div>

          <button class="saveBtn" id="btnGachaSR" type="button">
            SR以上確定（CDP100）
          </button>

          <div class="saveNote">
            通常ガチャ：引くたびにCDP +1（10連なら +10）<br />
            同名10枚まで有効／11枚目以降はG変換（中央ログ）
          </div>
        </div>

        <div id="shopResult" class="teamSection" style="display:none;">
          <div class="teamSectionTitle">結果</div>
          <div id="shopResultList" class="recordsList"></div>
          <button class="closeBtn" id="btnShopOk" type="button">OK</button>
        </div>
      </div>
    </div>

    <!-- CARD SCREEN -->
    <div id="cardScreen" class="teamScreen" aria-label="カードコレクション" aria-hidden="true">
      <div class="teamPanel teamPanelWide" role="dialog" aria-modal="true">
        <div class="teamHead">
          <h2 class="teamTitle">カードコレクション</h2>
          <button class="closeBtn teamCloseBtn" id="btnCloseCard" type="button">閉じる</button>
        </div>

        <div class="teamMeta">
          <div style="opacity:.9;font-size:13px;line-height:1.3;">
            ※所持しているだけで恒久強化（％は表示しない）<br />
            ※ID順で一覧表示
          </div>
        </div>

        <div class="teamSection">
          <div class="teamSectionTitle">所持カード一覧</div>
          <div id="cardList" class="recordsList"></div>
        </div>
      </div>

      <div id="cardPreview" class="modalCard" style="display:none;" aria-hidden="true">
        <div class="modalTitle">カード</div>
        <img
          id="cardPreviewImg"
          src=""
          alt="カード画像"
          style="width:100%;height:auto;display:block;border-radius:12px;"
        />
        <button class="closeBtn" id="btnCloseCardPreview" type="button">閉じる</button>
      </div>
    </div>

    <!-- SCHEDULE SCREEN -->
    <div id="scheduleScreen" class="teamScreen" aria-label="年間スケジュール" aria-hidden="true">
      <div class="teamPanel teamPanelWide" role="dialog" aria-modal="true">
        <div class="teamHead">
          <h2 class="teamTitle">年間スケジュール</h2>
          <button class="closeBtn teamCloseBtn" id="btnCloseSchedule" type="button">閉じる</button>
        </div>

        <div class="teamMeta">
          <div style="opacity:.9;font-size:13px;line-height:1.3;">
            ※次の大会は赤色で強調
          </div>
        </div>

        <div class="teamSection">
          <div class="teamSectionTitle">スケジュール</div>
          <div id="scheduleList" class="recordsList"></div>
        </div>
      </div>
    </div>

    <div class="safePad" aria-hidden="true"></div>
  </div>

  <!-- =========================
       JS
       ★重要：ここは app.js だけにする（動的ロード方式）
  ========================== -->
  <script src="app.js?v=19" defer></script>
</body>
</html>
